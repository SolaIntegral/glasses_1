# 予約システム要件定義書

## 1. システム概要
講師と生徒をつなぐMTG予約システム

### 基本機能
- 講師のプロフィール表示
- 講師の空き時間表示
- 生徒による予約機能
- 講師へのSlack通知

### 将来的な展望
- LINE公式アカウントでの実装（フェーズ2）

---

## 2. 技術スタック（案）

### フロントエンド
- **選択肢A**: React / Next.js
- **選択肢B**: Vue.js / Nuxt.js
- **選択肢C**: シンプルなHTML/CSS/JavaScript

### バックエンド
- **選択肢A**: Node.js (Express)
- **選択肢B**: Python (FastAPI / Django)
- **選択肢C**: Ruby on Rails

### データベース
- **選択肢A**: PostgreSQL
- **選択肢B**: MySQL
- **選択肢C**: SQLite（開発用）/ Supabase（簡易版）

### 通知機能
- Slack API（Incoming Webhooks または Bot）

### ホスティング（案）
- Vercel / Netlify（フロントエンド）
- Heroku / Railway / Render（バックエンド）
- Supabase（データベース＋認証）

---

## 3. 主要機能詳細

### 3.1 ユーザー管理
#### 確認事項：
- [ ] ユーザー登録は必要ですか？
  - 生徒：登録必須 or ゲスト予約OK？
  - 講師：管理者が登録 or 自己登録？
- [ ] ログイン認証は必要ですか？
  - メール/パスワード
  - Google / LINE ログイン
  - 認証なし（簡易版）

### 3.2 講師プロフィール
#### 表示項目（例）：
- 名前
- 写真
- 自己紹介
- 専門分野・得意なこと
- 料金（必要な場合）
- レビュー・評価（将来的に）

#### 確認事項：
- [ ] 講師は何人程度想定していますか？
- [ ] 講師自身でプロフィールを編集できる必要がありますか？

### 3.3 空き時間管理
#### 方式の選択：
**方式A: カレンダー連携**
- Google Calendar APIと連携
- 講師のカレンダーから自動で空き時間を取得

**方式B: 手動設定**
- 講師が管理画面で空き時間を設定
- 週単位または日単位で設定

**方式C: 固定スケジュール**
- 曜日・時間帯ベースで固定
- 例：月・水・金の10:00-18:00

#### 確認事項：
- [ ] 1コマの時間は何分ですか？（30分、60分、選択可能？）
- [ ] 予約可能な期間は？（1週間先まで、1ヶ月先まで？）
- [ ] 当日予約は可能ですか？最短何時間前まで予約可能？
- [ ] キャンセル機能は必要ですか？キャンセルは何時間前まで？

### 3.4 予約機能
#### 予約フロー：
1. 講師一覧から講師を選択
2. 講師のカレンダーから空き時間を選択
3. 予約者情報入力（名前、メール、希望内容など）
4. 予約確定
5. 確認メール送信（オプション）
6. Slack通知送信

#### 確認事項：
- [ ] 予約時に入力する情報は？
  - 生徒の名前
  - メールアドレス
  - 電話番号
  - 相談内容・目的
  - その他
- [ ] 予約の重複チェックは必要ですか？
- [ ] 同じ時間帯に複数人予約できる？（グループMTG）

### 3.5 通知機能
#### Slack通知内容（例）：
```
🔔 新しい予約が入りました

講師: 山田太郎
日時: 2025年10月25日（金）14:00-15:00
生徒: 佐藤花子
メール: hanako@example.com
内容: プログラミング学習の相談

[予約詳細を見る]
```

#### 確認事項：
- [ ] 各講師専用のSlackチャンネルに通知？
- [ ] 全体チャンネルに通知？
- [ ] 講師個人のDMに通知？
- [ ] 予約完了だけでなく、キャンセル時も通知必要？

---

## 4. データベース設計（案）

### テーブル構成案：

#### users（ユーザー）
- id
- name
- email
- password_hash
- role（講師 or 生徒）
- created_at

#### instructors（講師詳細）
- id
- user_id（外部キー）
- profile_image
- bio（自己紹介）
- specialties（専門分野）
- slack_webhook_url または slack_user_id
- created_at

#### available_slots（空き時間）
- id
- instructor_id（外部キー）
- start_time
- end_time
- is_booked
- created_at

#### bookings（予約）
- id
- instructor_id（外部キー）
- student_name
- student_email
- student_phone
- start_time
- end_time
- purpose（目的）
- status（confirmed, cancelled, completed）
- created_at

---

## 5. 開発フェーズ提案

### Phase 1: MVP（最小機能版）
- [ ] 講師情報の表示（固定データ）
- [ ] 空き時間の表示（固定または手動設定）
- [ ] シンプルな予約フォーム
- [ ] Slack通知の実装
- [ ] 予約一覧表示

### Phase 2: 管理機能追加
- [ ] ユーザー認証
- [ ] 講師用管理画面（プロフィール編集）
- [ ] 空き時間の動的管理
- [ ] 予約のキャンセル機能
- [ ] メール通知

### Phase 3: 高度な機能
- [ ] カレンダー連携（Google Calendar等）
- [ ] 決済機能（Stripe等）
- [ ] レビュー・評価機能
- [ ] リマインダー通知

### Phase 4: LINE移行
- [ ] LINE Messaging API連携
- [ ] LINE ログイン
- [ ] LIFFアプリ化

---

## 6. 確定要件

### ✅ 決定事項：
1. **ユーザー登録**: 生徒も講師も登録が必要
2. **技術スタック**: TypeScript + Firebase
3. **講師数**: 10名
4. **MTG時間**: 30分固定
5. **予約期間**: 2週間先まで
6. **キャンセル機能**: 必要、24時間前までキャンセル可能
7. **当日予約**: 不可能（最短24時間前まで）
8. **通知**: Slack通知 + メール通知の両方
9. **決済機能**: 無料（決済機能なし）
10. **開発方針**: まずローカル環境で動作確認、その後Firebase実装

---

## 7. 参考になる既存サービス
- Calendly
- Coubic
- Airリザーブ
- STORES 予約
- Acuity Scheduling

どのような機能が理想に近いでしょうか？

